# 内核中用到的C扩展

1. 内联函数

   定义内联函数时，要使用`static`+`inline`作为关键字和限定。实践中一般在头文件定义内联函数。由于使用`static`，编译时不会把内联函数单独建立一个函数体。

   在内核中，为了安全和易读性，优先使用内联函数而不是复杂的宏

2. 内联汇编

   在知道对应体系结构时可以如此做。通常用`asm()`指令嵌入汇编代码。

3. 分支声明

   用unlikely()和likely()函数区分选择发生的可能性