## DMA（直接存储器访问）

CPU经历了三个步骤，先将内存中指定位置上的数据取到数据缓存器中，然后在将数据缓存器中的内容写入到内存中，总共用了三步来完成内存两天不同地址上的数据写入

而使用DMA之后就会变得非常简单，DMA不会放入暂存器，而是直接写入写入内存，你只需要设置好源地址，目标地址，传输量，那么DMA就会开始传输数据，但DMA会占用你设备的总线，也就是这个过程中你无法使用总线，需要进行一个控制权转移，这样虽然传输变快了但是传输期间CPU基本上做不了别的事情，但是有些架构已经为DMA提供了一套自己的总线，在DMA传输过程中CPU依然可以控制外设，这个控制权转移不是一直DMA有效的，为了保证CPU也能正常通过系统总线去控制外设，一般会给DMA一定时间然后控制权在切回CPU，然后CPU处理一段时间在切回DMA直到DMA结束才会停止控制权转移。

### **在有数据cache情况下，DMA数据链路为：**

外设-DMA-DDR-cache-CPU

## CR3寄存器

对于64位机，CR3寄存器也从32位变成了64位，它的主要功能还是用来存放页目录表物理内存基地址，每当进程切换时，Linux就会把下一个将要运行进程的页目录表物理内存基地址等信息存放到CR3寄存器中。

https://blog.csdn.net/SweeNeil/article/details/106171361