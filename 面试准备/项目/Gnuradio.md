# 基础架构

gnuradio是由国际开源组织（GNU）提供的一个免费的软件无线电开发环境，发起于2001年（至今不过20年）。基本结构包括一块低成本的射频卡(USRP，通用软件无线电外设，由Ettus公司开发)和一台PC机。gnuradio架构如下图所示：

![img](https://pic4.zhimg.com/80/v2-24ad29d9d25662d7be1ba13ff008643f_720w.jpg)

UHD作为USRP的驱动

## gnuradio｜射频前端板卡

主要完成射频变换，AD、DA、上下变频、滤波等信号预处理功能，支持USRP、HACKRF、BLADERF等多种硬件外设。相关硬件性能比较如下：

![img](https://pic3.zhimg.com/80/v2-1855bca91dd32ba9149a1a10ff25f672_720w.jpg)

## gnuradio｜信号处理机

即一台PC，一般配置要求多核、主频２GHz以上，实时性要求很高时，CPU配置也得相应提升。信号处理等功能靠纯软件实现：基于Linux开发环境，用Python脚本语言进行配置，由C++语言完成核心信号处理算法代码。SWIG接口方便Python调用C++编写的模块，毕竟C++执行效率高。在gnuradio中，已编译好的模块称为组件，一般具有输入端口、输出端口，具有特定功能，对外提供可变参数的输入接口，用XML语言标识接口信息。像这样：

![img](https://pic4.zhimg.com/80/v2-7444a4a4f8cb78bee9b960b0139fde8b_720w.jpg)

进一步，由组件构建流图，类似Simulink，完成一定的通信功能，像这样：

![img](https://pic4.zhimg.com/80/v2-3eba9705f2c95264fbe8be04a9d9033f_720w.jpg)

## gnuradio｜UHD驱动

既然gnuradio支持多种类型的射频硬件，就需要良好的硬件抽象层对差异化的硬件设备进行抽象，所以，UHD（USRP Hardware Driver ，简写为UHD)接口驱动是关键，如图２所示，UHD需要提供统一的数据流格式，更好地对基带IQ数据进行封装；提供统一的控制流格式，更好地对射频参数进行配置。

### **overflow**

基于网络的设备：主机不会对接收流进行背压。当内核的套接字缓冲区已满时，它将丢弃后续数据包。 UHD 软件将溢出检测为数据包序列号的不连续性，并将内嵌消息数据包推送到接收流中。在这种情况下，字符“D”被打印到标准输出作为指示。

其他设备：主机对接收流进行反压。因此，溢出总是发生在设备本身。当设备的内部缓冲区已满时，流将关闭，并向主机发送内联消息包。在这种情况下，字符“O”被打印到标准输出作为指示。如果设备处于连续流模式，当缓冲区再次有空间时，UHD 软件将自动重新开始流。



基于网络的设备连接方式udp
